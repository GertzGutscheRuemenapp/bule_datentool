<app-header-card [title]="'Verkehrsnetz (optional)'"
                 cookieId="exp-router-header"
                 width="1230px">
  <p>Die Erreichbarkeitsverhältnisse in Ihrem Projektgebiet werden anhand von Erreichbarkeitsmatrizen abgebildet. Erreichbarkeitsmatrizen sind (große) Tabellen, in denen für ein bestimmtes Verkehrsmittel verzeichnet ist, wie lange man mit diesem von Teilfläche A zu Teilfläche B braucht. Die Teilflächen entsprechend dabei dem europaweit standardisierten 100x100-Meter-LAEA-Raster, auf das bereits im Menüpunkt „Einwohnerraster“ Bezug genommen wurde.</p>
  <p>Diese Erreichbarkeitsmatrizen werden im nachfolgenden Menüpunkt „Erreichbarkeiten“ für die vier Verkehrsmittel „zu Fuß“, „Fahrrad“, „Auto“ und „ÖPNV“ zusammengetragen. Dabei können entweder extern vorberechnete Erreichbarkeitsmatrizen hochgeladen oder Erreichbarkeitsmatrizen berechnet werden.</p>
  <p>Wenn Sie ausschließlich extern vorberechnete Erreichbarkeitsmatrizen benutzen, können Sie den hier angezeigten Menüpunkt „Verkehrsnetze“ überspringen.</p>
  <p>Wenn Sie hingegen einzelne oder alle Erreichbarkeitsmatrizen innerhalb von daviplan berechnen lassen wollen, müssen Sie hierfür auf dieser Bildschirmseite ein (oder mehrere) Verkehrsnetze definieren. Der oder die auf dieser Seite definierten Verkehrsnetze können Sie dann im nächsten Menüpunkt „Erreichbarkeiten“ verwenden, um dort einzelne oder alle Erreichbarkeitsmatrizen berechnen zu lassen.</p>
  <p>Ein Verkehrsnetz kann für die Berechnung der Erreichbarkeitsmatrizen unterschiedlicher Verkehrsmittel verwendet werden, sofern die nachstehenden Datenanforderungen erfüllt sind.</p>
  <p>Mindestanforderungen für alle Verkehrsmittel ist die Integration eines Straßennetzes auf Basis von OpenStreetMap-Daten in das Verkehrsnetz. Weitere Informationen hierzu finden Sie im Handbuch sowie im Hilfetext der Box „OpenStreetMap-Daten des ausgewählten Verkehrsnetzes“.</p>
  <p>Für Verkehrsnetze, die zum Erzeugen einer ÖPNV-Erreichbarkeitsmatrix verwendet werden sollen, brauchen Sie zusätzlich die regionalen Fahrplandaten im Datenformat „GTFS“. Weitere Informationen hierzu finden Sie im Handbuch sowie im Hilfetext der Box „ÖPNV-Daten (GTFS) des ausgewählten Verkehrsnetzes“.</p>
  <p>Optional können Sie noch Höhendaten in Ihr Verkehrsnetz integrieren. Dies ist vor allem dann sinnvoll, wenn Ihre Region sehr hügelig oder gar bergig ist.</p>
  <p>Wenn Sie ein neues Verkehrsnetz definieren, wir diesem zunächst standardmäßig ein OpenStreetMap-Straßennetz sowie ein Höhendatensatz als Vorlage hinzufügt. Diese Daten haben einen Datenstand 2021 und können direkt verwendet werden. Wenn Sie stattdessen andere oder aktuellere Daten verwenden möchten, laden Sie Ihre Daten in den entsprechenden Boxen hoch. Ein vergleichbarer Standarddatensatz für die ÖPNV-Fahrplandaten kann bisher leider nicht bereitgestellt werden.</p>
  <p>Wenn sich in Zukunft maßgebliche Dinge an ihren Straßen- und ÖPNV-Netzen ändert, z.B. eine erhebliche Ausweitung oder Reduzierung des ÖPNV-Angebots absehbar ist oder eine maßgebliche neue Straßenverbindung (Ortsumgehung, Autobahnanschluss, …) diskutiert wird, kann es sinnvoll sein, ein oder mehrere weitere Verkehrsnetze zu definieren, in deren Eingangsdaten diese Änderungen berücksichtigt sind. Auf dieser Basis können Sie im nachfolgenden Menüpunkt „Erreichbarkeit“ dann alternative Erreichbarkeitsmatrizen für das gleiche Verkehrsmittel (z.B. „Pkw-Erreichbarkeit mit dem aktuellen Straßennetz“ und „Pkw-Erreichbarkeit nach Umsetzung aller Ausbauplanungen“), die von den Nutzer*innen im Hauptmenübereich „Infrastrukturplanung“ dann alternativ zur Bewertung der Erreichbarkeit von Infrastrukturen verwendet werden können.</p>
  <p>Um ein Verkehrsnetz zu definieren, klicken Sie in der Box „Verkehrsnetze“ auf Hinzufügen und folgen den weiteren Anweisungen im dortigen Hilfetext.</p>
</app-header-card>
<div fxLayout="row wrap">
  <div fxLayout="column" fxFlex="350px">
    <app-input-card [title]="'Verkehrsnetze'"
                    infoText="<p>Klicken Sie auf „Hinzufügen“, um ein Verkehrsnetz hinzufügen und anschließend mit Hilfe der anderen Boxen genauer zu definieren.</p>
                    <p>Um die Eigenschaften eines Verkehrsnetzes zu betrachten und ggf. zu verändern, wählen Sie dieses in der Liste aus und kontrollieren Sie seine Eigenschaften in den anderen Boxen.</p>
                    <p>Um ein Verkehrsnetz zu löschen, wählen Sie dieses in der Liste aus und klicken Sie „Entfernen“.</p>
                    <p>Ein Verkehrsnetz kann für die Berechnung der Erreichbarkeitsmatrizen unterschiedlicher Verkehrsmittel verwendet werden. Dabei gilt: </p>
                    <ul>
                      <li>In jedem Fall muss Ihr Verkehrsnetz Daten für das Straßennetz beinhalten. Ihm wird automatisch beim Anlegen ein OpenStreetMap-Datensatz (Stand 2021) hinzugefügt, den Sie optional austauschen können. Weitere Informationen hierzu finden Sie in der Box „OpenStreetMap-Daten des ausgewählten Verkehrsnetzes“.</li>
                      <li>Wenn Sie mit dem Verkehrsnetz eine ÖPNV-Erreichbarkeitsmatrix berechnen wollen müssen Sie ihm in der Box „ÖPNV-Daten (GTFS) des ausgewählten Verkehrsnetzes“ regionale Fahrplandaten hinzufügen. Es können bisher leider keine Standarddaten zur Verfügung gestellt werden. Weitere Informationen hierzu finden Sie dort.</li>
                      <li>Optional können Höhendaten in das Verkehrsnetz integriert werden um die Topografie zu berücksichtigen. Einem neu angelegten Verkehrsnetz wird automatisch ein Höhendatensatz hinzugefügt, den Sie optional austauschen können. Weitere Informationen hierzu finden Sie in der Box „Höhendaten des ausgewählten Verkehrsnetzes“.</li>
                    </ul>
                    <p>Wenn Sie alle für Ihre Zwecke notwendigen Daten in den entsprechenden Eingabeboxen hinzufügt haben, klicken Sie bitte in der Box „Routensucher für das ausgewählte Verkehrsnetz“ auf „Routensucher erzeugen“.</p>"
                    subtitle="Router mit verschiedenen Wegenetzen">
      <mat-selection-list [multiple]="false"
                          id="router-select">
        <mat-list-option *ngFor="let router of routers"
                         (click)="selectedRouter = router"
                         [selected]="router === selectedRouter">
          <div class="option-text">{{router}}</div>
        </mat-list-option>
      </mat-selection-list>
      <div style="margin-top: 10px;">
        <button mat-button color="primary"
                class="mat-button-dv">
          <mat-icon>add</mat-icon>hinzufügen
        </button>
        <button mat-button color="primary"
                style="margin-left: 40px;"
                class="mat-button-dv">
          <mat-icon>close</mat-icon>entfernen
        </button>
      </div>
    </app-input-card>
  </div>
  <div fxLayout="column">
    <div style="display: flex; flex-flow: wrap; max-width: 900px;">
      <div style="width: 300px;">
        <app-input-card [title]="'OpenStreetMap Daten'"
                        infoText="<p>Jedes Verkehrsnetz benötigt Straßennetzdaten im Datenformat der OpenStreetMap-Daten.</p>
                        <p>Einem in der Box „Verkehrsnetze“ neu hinzugefügten Verkehrsnetz wird automatisch ein Standarddatensatz mit OpenStreetMap-Daten (Stand 2021) hinzugefügt. Sie haben die Möglichkeit, diesen durch eigene, z.B. aktuellere oder modifizierte OpenStreetMap-Daten zu ersetzen. Klicken Sie hierzu auf „Daten hochladen“. Wenn Sie doch wieder den Standarddatensatz verwenden möchten, klicken Sie auf die Schaltfläche „Auf Vorgabe zurücksetzen“.</p>"
                        [subtitle]="'für Verkehrsnetz „' + selectedRouter + '“'">
          <div style="height: 80px;">
            <table>
              <tr>
                <td>Datei</td>
                <td>germany.osm.pbf</td>
              </tr>
              <tr>
                <td>Upload</td>
                <td>31.05.2022</td>
              </tr>
            </table>
          </div>
          <div>
            <button mat-button class="mat-button-dv" color="primary">
              <mat-icon style="transform: scaleX(-1);">refresh</mat-icon> Auf Vorgabe zurücksetzen
            </button>
          </div>
          <div>
            <button mat-button class="mat-button-dv" color="primary">
              <mat-icon>upload</mat-icon> Datei hochladen
            </button>
          </div>
        </app-input-card>
      </div>
      <div style="width: 300px;">
        <app-input-card [title]="'Höhendaten (optional)'"
                        [subtitle]="'für Verkehrsnetz „' + selectedRouter + '“'"
                        infoText="<p>Dem Verkehrsnetz können optional Höhendaten im Datenformat GeoTIFF hinzugefügt werden.</p>
                        <p>Einem in der Box „Verkehrsnetze“ neu hinzugefügten Verkehrsnetz wird automatisch ein Standarddatensatz mit ASTER-Daten (Stand 2021) hinzugefügt. Sie haben die Möglichkeit, diesen durch eigene Höhendaten zu ersetzen. Klicken Sie hierzu auf „Daten hochladen“. Wenn Sie doch wieder den Standarddatensatz verwenden möchten, klicken Sie auf die Schaltfläche „Auf Vorgabe zurücksetzen“.</p>">
          <div style="height: 80px;">
            <table>
              <tr>
                <td>Datei</td>
                <td>Vorgabe (deutschlandweite Aster)</td>
              </tr>
              <tr>
                <td>Upload</td>
                <td>-</td>
              </tr>
            </table>
          </div>
          <div>
            <button mat-button class="mat-button-dv" color="primary">
              <mat-icon style="transform: scaleX(-1);">refresh</mat-icon> Auf Vorgabe zurücksetzen
            </button>
          </div>
          <div>
            <button mat-button class="mat-button-dv" color="primary">
              <mat-icon>upload</mat-icon> Datei hochladen
            </button>
          </div>
        </app-input-card>
      </div>
      <div style="width: 300px;">
        <app-input-card [title]="'ÖPNV-Daten (optional)'"
                        [subtitle]="'für Verkehrsnetz „' + selectedRouter + '“'"
                        infoText="<p>Wenn Sie dieses Verkehrsnetz im nachfolgenden Menüpunkt „Erreichbarkeiten“ verwenden möchten, um eine ÖPNV-Erreichbarkeitsmatrize zu berechnen, müssen Sie diesen an dieser Stelle regionale Fahrplandaten im GTFS-Format hinzufügen.</p>
                        <p>Einem in der Box „Verkehrsnetze“ neu hinzugefügten Verkehrsnetz werden nicht automatisch Standarddaten zum ÖPNV hinzugefügt, weil diese bisher noch nicht flächendeckend vorliegen.</p>
                        <p>Um dem ausgewählten Verkehrsnetz eigene ÖPNV-Fahrplandaten im GTFS-Format hinzuzufügen, klicken Sie bitte auf „Daten hochladen“. Wenn Sie diese wieder aus dem Verkehrsnetz entfernen möchten, klicken Sie auf „Entfernen“.</p>">
          <div style="height: 80px;">
            <table>
              <tr>
                <td>Datei</td>
                <td>-</td>
              </tr>
              <tr>
                <td>Upload</td>
                <td>-</td>
              </tr>
            </table>
          </div>
          <div>
            <button mat-button class="mat-button-dv" color="primary">
              <mat-icon>close</mat-icon> entfernen
            </button>
          </div>
          <div>
            <button mat-button class="mat-button-dv" color="primary">
              <mat-icon>upload</mat-icon> Datei hochladen
            </button>
          </div>
        </app-input-card>
      </div>
      <div fxLayout="column" fxFlex="900px">
        <app-input-card [title]="'Routensucher für das ausgewählte Wegenetz'"
                        infoText="<p>Wenn Sie alle notwendigen Grundlagendaten (Straßennetz, ggf. Höhendaten und ÖPNV-Daten) hinzugefügt bzw. auf den Vorgabewerten belassen haben, müssen Sie für dieses Verkehr einen Routensucher erzeugen. Klicken Sie hierzu auf „Routensucher erzeugen“.</p>
                        <p>Erst wenn für Ihr Verkehrsnetz ein Routensucher erzeugt wurde, können Sie mit diesem Verkehrsnetz im nachfolgenden Menüpunkt „Erreichbarkeiten“ Erreichbarkeitsmatrizen berechnen.</p>
                        <p>Hintergrundinfo: Technisch gesprochen entspricht ein Routensucher einem „routing-fähigen Graphen“.</p>">
          <div style="width: 100%; display: flex;">
            <div style="width: 40%;">
              <span class="subtitle1 sub">
                Verkehrsnetz „{{selectedRouter}}“
              </span>
              <table>
                <tr>
                  <td style="min-width: 130px;; white-space: normal;">Buffer um das Projektgebiet</td>
                  <td>10km</td>
                </tr>
                <tr>
                  <td>erzeugt am</td>
                  <td>31.05.2022</td>
                </tr>
                <tr>
                  <td>von</td>
                  <td>Sascha Schmidt</td>
                </tr>
              </table>
              <div style="margin-top: 50px;">
                <button mat-flat-button color="primary">
                  <mat-icon>build</mat-icon> Routensucher erzeugen
                </button>
              </div>
            </div>
            <div id="log-window" style="width: 60%">
              <span class="subtitle1">Historie</span>
              <app-log></app-log>
            </div>
          </div>
        </app-input-card>
      </div>
    </div>
  </div>
</div>
