<app-scenario-menu domain="reachabilities" [ngClass]="{'expanded': showScenarioMenu}"></app-scenario-menu>
<mat-expansion-panel class="side-toggle" id="scenario-toggle" cookieExpansion="exp-planning-scenario">
  <mat-expansion-panel-header (click)="showScenarioMenu=!showScenarioMenu;">
    <mat-panel-title>
      <div class="mini-fab-icon" [ngClass]="{'primary': showScenarioMenu}">
        <div class="davicon icon-GGR-davicons-Font-Simple-2-Szenario"></div>
      </div>
      Szenario
    </mat-panel-title>
  </mat-expansion-panel-header>
</mat-expansion-panel>
<mat-expansion-panel cookieExpansion="exp-reach-services">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <div class="mini-fab-icon">
        <div class="davicon icon-GGR-davicons-Font-Simple-3-Standorte-Leistungen"></div>
      </div>
      Leistung/en
    </mat-panel-title>
  </mat-expansion-panel-header>
  <div style="padding-bottom: 10px;">
    <div style="position: relative;">
      <mat-form-field appearance="outline" class="small">
        <mat-label>Infrastrukturbereich</mat-label>
        <mat-select disableOptionCentering disableRipple
                    [(value)]="selectedInfrastructure"
                    [ngbPopover]="selectedInfrastructure?.description"
                    placement="right"
                    container="body"
                    triggers="mouseenter:mouseleave">
          <mat-option [value]="infrastructure" *ngFor="let infrastructure of infrastructures"
                      [ngbPopover]="infrastructure.description"
                      placement="right"
                      container="body"
                      triggers="mouseenter:mouseleave">
            {{infrastructure.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button color="primary" mat-icon-button
              class="filter-button small" title="Standortfilter"
              (click)="onFilter()">
        <mat-icon>filter_list</mat-icon>
      </button>
    </div>
    <div class="sub-select-wrapper">
      <mat-checkbox *ngFor="let service of selectedInfrastructure.services; let first = first;"
                    [value]="service.name"
                    [checked]="first"
                    color="primary"
                    style="margin-right: 100%;"
                    ngbPopover="Platzhalter Beschreibung der Leistung"
                    placement="right"
                    container="body"
                    triggers="mouseenter:mouseleave">
        {{service.name}}
      </mat-checkbox>
    </div>
  </div>
  <mat-divider></mat-divider>
  <div>
    <ul style="list-style-type: none; margin: 10px 0 10px -28px;">
      <li><mat-slide-toggle color="primary">Cluster</mat-slide-toggle></li>
      <li><mat-slide-toggle color="primary">Verdrängung</mat-slide-toggle></li>
      <li>
        <div class="row-button">
          <label i18n>Zoom auf alle</label>
          <div class="fill-space"></div>
          <button mat-icon-button color="primary" class="small">
            <mat-icon>location_searching</mat-icon>
          </button>
        </div>
      </li>
    </ul>
  </div>
  <mat-expansion-panel class="text-panel">
    <mat-expansion-panel-header>
      <mat-icon color="primary" class="material-icons-outlined"
                style="margin-right: 5px;">help_outline</mat-icon>
      <span class="subtitle1">Hilfe</span>
    </mat-expansion-panel-header>
    <span class="info-text">
      <p>Wählen Sie hier im Dropdown-Menü den Infrastrukturbereich und per Checkbox die Leistungen aus dem jeweiligen Infrastrukturbereich aus. Mit dem Klick auf das Filtersymbol können Sie Filter auf Standorte setzen und bearbeiten.</p>
      <p>Cluster, Verdrängung und Zoom auf alle stellen Darstellungsoptionen für die Karte dar. </p>
    </span>
  </mat-expansion-panel>
</mat-expansion-panel>
<mat-expansion-panel cookieExpansion="exp-reach-indicator">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <div class="mini-fab-icon">
        <div class="davicon icon-GGR-davicons-Font-Simple-5-Fortbewegung-Wegezeit"></div>
      </div>
      Indikator
    </mat-panel-title>
  </mat-expansion-panel-header>
  <div id="indicator-select"><!--  <div style="padding-left: 8px;">-->
    <mat-radio-group [(ngModel)]="indicator" (change)="toggleIndicator()">
      <mat-radio-button value="option 1" color="primary" i18n>
        von allen Wohnstandorten <br> zum Angebot
      </mat-radio-button>
      <div class="row-button" [ngClass]="{'active': selectFacMode, 'disabled': indicator!=='option 1'}" (click)="selectFacMode = !selectFacMode">
        <label i18n>Einrichtung auswählen</label>
        <div class="fill-space"></div>
        <button color="primary" *ngIf="!selectFacMode" class="small" mat-icon-button>
          <mat-icon class="material-icons-outlined">pin_drop</mat-icon>
        </button>
        <button color="primary" *ngIf="selectFacMode" class="small" mat-mini-fab>
          <mat-icon class="material-icons-outlined">pin_drop</mat-icon>
        </button>
      </div>
      <mat-radio-button value="option 2" color="primary" i18n>
        von einem Wohnstandort <br> zu allen Angeboten
      </mat-radio-button>
      <div class="row-button" [ngClass]="{'active': selectLivMode, 'disabled': indicator!=='option 2'}" (click)="selectLivMode = !selectLivMode">
        <label i18n>Wohnstandort auswählen</label>
        <div class="fill-space"></div>
        <button color="primary" *ngIf="!selectLivMode" class="small" mat-icon-button>
          <mat-icon class="material-icons-outlined">pin_drop</mat-icon>
        </button>
        <button color="primary" *ngIf="selectLivMode" class="small" mat-mini-fab>
          <mat-icon class="material-icons-outlined">pin_drop</mat-icon>
        </button>
      </div>
      <mat-radio-button value="option 3" color="primary" i18n>
        von allen Wohnstandorten <br> zum jeweils nächsten Angebot
      </mat-radio-button>
    </mat-radio-group>
  </div>
  <mat-expansion-panel class="text-panel">
    <mat-expansion-panel-header>
      <mat-icon color="primary" class="material-icons-outlined"
                style="margin-right: 5px;">help_outline</mat-icon>
      <span class="subtitle1">Hilfe</span>
    </mat-expansion-panel-header>
    <span class="info-text">
      Wählen Sie hier den Erreichbarkeitsindikator für die Darstellung in der Karte aus. Dargestelt stellt wird die Erreichbarkeit mit dem unten ausgewählten Verkehrsmittel. Sie haben dabei drei Optionen:
      <ul>
        <li>Erreichbarkeit eines Standortes mit ausgewählter Leistung von allen Wohnstandorten anzeigen (>gewünschten Standort mit Klick in die Karte auswählen)</li>
        <li>Erreichbarkeit aller Standorte mit ausgewählter Leistung von einem Wohnstandort aus anzeigen (>gewünschten Wohnstandort mit Klick in die Karte auswählen)</li>
        <li>Erreichbarkeit des jeweils nächsten Standortes mit ausgewählter Leistung für alle Wohnstandorte. </li>
      </ul>
    </span>
  </mat-expansion-panel>
</mat-expansion-panel>
<mat-expansion-panel cookieExpansion="exp-reach-modes">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <div class="mini-fab-icon">
        <mat-icon class="material-icons-outlined">directions_bus_filled</mat-icon>
      </div>
      Verkehrsmittel
    </mat-panel-title>
  </mat-expansion-panel-header>
  <div id="mode-select" class="sub-select-wrapper" style="display: flex">
    <div (click)="transportMode=1" title="zu Fuß" [ngClass]="{'selected': transportMode === 1}">
      <div class="mini-fab-icon primary"
           [ngClass]="{'inverted': transportMode === 1}"
           style="cursor: pointer;">
        <mat-icon style="font-size: 20px;" class="material-icons-outlined">directions_walk</mat-icon>
      </div>
      <div>
        zu Fuß
      </div>
    </div>
    <div (click)="transportMode=2" title="Fahrrad"  [ngClass]="{'selected': transportMode === 2}">
      <div class="mini-fab-icon primary"
           [ngClass]="{'inverted': transportMode === 2}"
           title="Fahrrad" style="cursor: pointer;">
        <mat-icon style="font-size: 20px;" class="material-icons-outlined">directions_bike</mat-icon>
      </div>
      <div>
        Rad
      </div>
    </div>
    <div (click)="transportMode=3" title="Auto"  [ngClass]="{'selected': transportMode === 3}">
      <div class="mini-fab-icon primary"
           [ngClass]="{'inverted': transportMode === 3}"
           style="cursor: pointer;">
        <div class="davicon icon-GGR-davicons-Font-Simple-17-PKW"></div>
      </div>
      <div style="margin-top: -4px;">
        Auto
      </div>
    </div>
    <div (click)="transportMode=4" title="ÖPNV"  [ngClass]="{'selected': transportMode === 4}">
      <div class="mini-fab-icon primary"
           [ngClass]="{'inverted': transportMode === 4}"
           title="ÖPNV" style="cursor: pointer;">
        <div class="davicon icon-GGR-davicons-Font-Simple-18-OEPNV"></div>
      </div>
      <div style="margin-top: -4px;">
        ÖPNV
      </div>
    </div>
  </div>
  <mat-expansion-panel class="text-panel">
    <mat-expansion-panel-header>
      <mat-icon color="primary" class="material-icons-outlined"
                style="margin-right: 5px;">help_outline</mat-icon>
      <span class="subtitle1">Hilfe</span>
    </mat-expansion-panel-header>
    <span class="info-text">
      Wählen Sie hier das Verkehrsmittel für die Erreichbarkeitsdarstellung.
    </span>
  </mat-expansion-panel>
</mat-expansion-panel>

<ng-template #filterTemplate>
  <div style="display: flex; align-items: end; user-select: none;">
    <div>
      <h4>Standortfilter</h4>
      <span class="subtitle1 sub" i18n>Die Tabelle zeigt die gefilterten Standorte im Szenario [Name] im Jahr {{timeSlider.value}}</span>
    </div>
    <div id="time-slider-wrapper" style="display: flex; margin-left: 200px; margin-bottom: 10px;"> <!--margin-left: auto-->
      <div class="time-button" (click)="timeSlider.value = timeSlider.value - 1;">
        <mat-icon color="primary">chevron_left</mat-icon>
      </div>
      <div class="time-button" (click)="timeSlider.value = timeSlider.value + 1;">
        <mat-icon color="primary">chevron_right</mat-icon>
      </div>
      <div style="display: flex; padding: 0px 10px 10px 10px;">
        <label style="padding-top: 25px;">2000</label>
        <mat-slider #timeSlider color="primary"
                    thumbLabel min="2000" max="2100" step="1" value="2010"
                    style="width: 420px; margin-top: 15px;"></mat-slider>
        <label style="padding-top: 25px;">2100</label>
      </div>
    </div>
  </div>
  <app-filter-table></app-filter-table>
</ng-template>
